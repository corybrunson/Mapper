<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the Mapper Package • Mapper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the Mapper Package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Mapper</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Package under development">0.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/Mapper.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ShapeRecognition.html">Shape Recognition</a>
    </li>
    <li>
      <a href="../articles/UsingCustomCover.html">Using a custom covering method</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/extra/community.html">User contributed</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/peekxc/Mapper">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="Mapper_files/htmlwidgets-1.4/htmlwidgets.js"></script><script src="Mapper_files/pixiplex_vis-0.0.2/pixiplex.min.js"></script><script src="Mapper_files/pixiplex_vis-binding-0.2/pixiplex_vis.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using the Mapper Package</h1>
                        <h4 class="author">Matt Piekenbrock</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/peekxc/Mapper/blob/master/vignettes/Mapper.Rmd"><code>vignettes/Mapper.Rmd</code></a></small>
      <div class="hidden name"><code>Mapper.Rmd</code></div>

    </div>

    
    
<p>This document contains an overview of how to use the interface in the <em>Mapper</em> package to fully customize the <em>mapper</em> construction. The focus on this document is on package functionality and usage, as opposed the theory the <em>Mapper</em> framework was founded on, and as such discusses <em>Mapper</em> from a strictly algorithmic / computational perspective.</p>
<div id="quickstart" class="section level1">
<h1 class="hasAnchor">
<a href="#quickstart" class="anchor"></a>Quickstart</h1>
<p>Consider a noisy sampling of points along the perimeter of a circle in <span class="math inline">\(\mathbb{R}^2\)</span></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">## Generate noisy points around the perimeter of a circle </span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">n &lt;-<span class="st"> </span><span class="dv">1500</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">t &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(n)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">r &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(n, <span class="dt">min =</span> <span class="dv">2</span>, <span class="dt">max =</span> <span class="fl">2.1</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">noisy_circle &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(r<span class="op">*</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Trig">cos</a></span>(t), r<span class="op">*</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Trig">sin</a></span>(t))</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">## Plot the circle</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(noisy_circle, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">asp =</span> <span class="dv">1</span>, <span class="dt">xlab =</span> <span class="st">"X"</span>, <span class="dt">ylab =</span> <span class="st">"Y"</span>, <span class="dt">main =</span> <span class="st">"Circle"</span>)</a></code></pre></div>
<p><img src="Mapper_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
<p>To get the <strong>mapper</strong> of this circle, first supply the data via <code>X</code> and the mapped values via <code>filter</code>, along with the parameters to other components such as the cover and clustering parameters. See <code><a href="../reference/Mapper.html">?mapper</a></code> for more details. A summary is available with the default print method.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"Mapper"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">left_pt &lt;-<span class="st"> </span>noisy_circle[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which.min">which.min</a></span>(noisy_circle[, <span class="dv">1</span>]),]</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">f_x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(noisy_circle, <span class="dv">1</span>, <span class="cf">function</span>(pt) (pt <span class="op">-</span><span class="st"> </span>left_pt)[<span class="dv">1</span>]))</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">m &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Mapper.html">mapper</a></span>(<span class="dt">data =</span> noisy_circle, </a>
<a class="sourceLine" id="cb2-5" data-line-number="5">            <span class="dt">filter =</span> f_x, </a>
<a class="sourceLine" id="cb2-6" data-line-number="6">            <span class="dt">cover =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">typename=</span><span class="st">"fixed interval"</span>, <span class="dt">number_intervals=</span>5L, <span class="dt">percent_overlap=</span><span class="dv">50</span>),</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">            <span class="dt">distance_measure =</span> <span class="st">"euclidean"</span>, </a>
<a class="sourceLine" id="cb2-8" data-line-number="8">            <span class="dt">clustering_algorithm =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">cl=</span><span class="st">"single"</span>))</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(m)</a></code></pre></div>
<pre><code>## Mapper with filter f: X^2 -&gt; Z
## Fixed Interval Cover: (number intervals = [5], percent overlap = [50]%)</code></pre>
<p>By default, the core information of the <span class="math inline">\(1\)</span>-skeleton of the <code>Mapper</code> construction is returned, including:</p>
<ol style="list-style-type: decimal">
<li><p>The vertices, and the points (by index) comprising their corresponding connected components.</p></li>
<li><p>Some adjacency representation of the mapper graph</p></li>
<li><p>A map between the index set of the cover and the vertices</p></li>
</ol>
<p>This is, in essence, all the central information one needs to conduct a more in-depth analysis of the mapper.</p>
</div>
<div id="building-the-mapper-piecewise" class="section level1">
<h1 class="hasAnchor">
<a href="#building-the-mapper-piecewise" class="anchor"></a>Building the Mapper piecewise</h1>
<p>For most use-cases, the static method above is sufficient for getting a compact Mapper construction back. However, building the ‘right’ Mapper is usually an <em>exploratory process</em> that requires parameter tuning in the form of e.g. alternative filter functions, ‘fitted’ clustering parameters, different covering geometries, etc. Indeed, the <em>Mapper</em> method itself is sometimes thought of as a tool for exploring properties of the data (as expressed via a filter), whose interconnections reflect some aspects of the metric structure. However, for large data sets, employing this iterative fitting process with the above wrapper method can be prohibitively expensive.</p>
<p>To help facilitate this process, the <em>Mapper</em> package uses <code>R6</code> class generators to decompose the components used to build the mapper. A few of the benefits <code>R6</code> classes include full encapsulation support, reference semantics for member fields, easy-to-employ parameter checking via active bindings, and composability via <a href="https://adv-r.hadley.nz/R6.html#method-chaining">method chaining</a>. More details available at <a href="https://adv-r.hadley.nz/r6.html#introduction-12">Hadleys Advanced R</a> series or the <a href="https://r6.r-lib.org/articles/Introduction.html">R6 documentation site</a>.</p>
<p>To demonstrate some of these benefits, consider a simplified interpretation of the Mapper pipeline:</p>
<ol style="list-style-type: decimal">
<li><p>“Filter” the data via a reference map</p></li>
<li><p>Equip the filtered space with a cover</p></li>
<li><p>Decompose preimages of the (pulled back) open sets of the cover into <em>clusters</em></p></li>
<li><p>Construct the <em>k</em>-skeleton by considering non-empty intersections of the clusters</p></li>
</ol>
<p>These steps are demonstrated below using the <code>noisy_circle</code> data set below. To begin building a mapper object more fluidly, one starts by using the <code>MapperRef</code> R6-class instance generator.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">m &lt;-<span class="st"> </span>MapperRef<span class="op">$</span><span class="kw">new</span>()</a></code></pre></div>
<p>The data can be specified at initialization, or later using the <code>use_data</code> method. The format of the data must be either a matrix of coordinate values or a function which returns a matrix of coordinate values.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/use_data.html">use_data</a></span>(noisy_circle)</a></code></pre></div>
<p>Assume, as before, that our filter is the distance from every points first coordinate to the point with left-most coordinate, <span class="math inline">\(p\)</span>, i.e.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">## 1. Specify a filter function for the data </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">left_pt &lt;-<span class="st"> </span>noisy_circle[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which.min">which.min</a></span>(noisy_circle[, <span class="dv">1</span>]),]</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">f_x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(noisy_circle, <span class="dv">1</span>, <span class="cf">function</span>(pt) (pt <span class="op">-</span><span class="st"> </span>left_pt)[<span class="dv">1</span>]))</a></code></pre></div>
<p>Coloring the points in the original space w/ a rainbow gradient based on their filter values sheds light on what the filter geometrically represents</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">## Bin the data onto a sufficiently high-resolution rainbow gradient from blue (low) to red (high)</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">rbw_pal &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rev">rev</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">100</span>, <span class="dt">start =</span> <span class="dv">0</span>, <span class="dt">end =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">6</span>))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">binned_idx &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cut">cut</a></span>(f_x, <span class="dt">breaks =</span> <span class="dv">100</span>, <span class="dt">labels =</span> F)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(noisy_circle, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">asp =</span> <span class="dv">1</span>, <span class="dt">col =</span> rbw_pal[binned_idx], <span class="dt">xlab =</span> <span class="st">"X"</span>, <span class="dt">ylab =</span> <span class="st">"Y"</span>, <span class="dt">main =</span> <span class="st">"Circle"</span>)</a></code></pre></div>
<p><img src="Mapper_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The filter is assigned as usual, and like the data matrix, it accepts a matrix of coordinate values or a function that generates a matrix of coordinate values.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/use_filter.html">use_filter</a></span>(f_x)</a></code></pre></div>
<p>Both the data matrix and filter as stored as <em>functions</em>, which both accept as input a set of indices and return as output a matrix of coordinate values.</p>
<!-- Explain sqllite example -->
<div id="constructing-the-cover" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-the-cover" class="anchor"></a>Constructing the cover</h2>
<p>Once the filter has been applied, a cover must be chosen to discretize the space. Here, a simple rectangular cover with fixed centers is used.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">## 2. Create cover </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">cover &lt;-<span class="st"> </span>FixedIntervalCover<span class="op">$</span><span class="kw">new</span>(<span class="dt">number_intervals =</span> 5L, <span class="dt">percent_overlap =</span> <span class="dv">20</span>)</a></code></pre></div>
<p>Cover parameters may be be supplied at initialization, or set via the assignment operator. If you supply a single value when the filter dimensionality <span class="math inline">\(&gt; 1\)</span>, the argument is recycled across the dimensions. The cover summary can be printed as follows:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(cover)</a></code></pre></div>
<pre><code>## Fixed Interval Cover: (number intervals = [5], percent overlap = [20]%)</code></pre>
<p>Once parameterized, the cover may be explicitly constructed via the <code>construct_cover</code> member, before passing back to the <code>MapperRef</code> instance. The <code>construct_cover</code> function uses the given set of parameters to populate the intersection between the open sets in the cover and the given filter data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">cover<span class="op">$</span><span class="kw">construct</span>(<span class="dt">filter =</span> m<span class="op">$</span>filter, <span class="dt">cache =</span> <span class="ot">TRUE</span>) <span class="co">## Now the sets are populated in "$sets"</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(cover<span class="op">$</span>sets)</a></code></pre></div>
<pre><code>##     Length Class  Mode   
## (1) 459    -none- numeric
## (2) 269    -none- numeric
## (3) 234    -none- numeric
## (4) 258    -none- numeric
## (5) 456    -none- numeric</code></pre>
<p><code>Mapper</code> accepts any cover that derives from the abstract <code>CoverRef</code> R6 class. Any such derived cover instance can be assigned to the <code>$cover</code> member.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">m<span class="op">$</span>cover &lt;-<span class="st"> </span>cover</a></code></pre></div>
<p>A few covering methods often used in practice are available. To see a list, use the <code>covers_available</code> method.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">## Print the typename/identifer, the R6 generator, and the parameter names</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="../reference/covers_available.html">covers_available</a></span>()</a></code></pre></div>
<pre><code>## Typename:                    Generator:                         Parameters:                          
##  fixed interval               FixedIntervalCover                 number_intervals, percent_overlap
##  restrained interval          RestrainedIntervalCover            number_intervals, percent_overlap
##  ball                         BallCover                          epsilon</code></pre>
<p>If you want to use a cover outside of the ones offers by the package, feel free to derive a new type cover class (and submitting a pull request!). There’s also a <a href="https://peekxc.github.io/Mapper/articles/UsingCustomCover.html">small tutorial</a> on how one might go about making their own.</p>
</div>
<div id="decomposing-the-preimages" class="section level2">
<h2 class="hasAnchor">
<a href="#decomposing-the-preimages" class="anchor"></a>Decomposing the preimages</h2>
<p>After creating the cover, the next step is to perform the <em>pullback</em> operation, wherein the cover <span class="math inline">\(\mathcal{U}\)</span> of the space <span class="math inline">\(Z\)</span> is used to create a cover on <span class="math inline">\(X\)</span> through <span class="math inline">\(f\)</span>. This operation generally denotes two operations: computing the preimages of each open set, and decomposing the subsets of <span class="math inline">\(X\)</span> given by these preimages into connected components. The latter is referred to in the original Mapper paper as <em>partial clustering</em>, and it (naturally) requires a number of parameters.</p>
<p>The goal of the <em>Mapper</em> package is to provide the user full access to how the open sets are decomposed, while also providing easy-to-parameterize defaults for those unfamiliar with clustering in general. Towards this end, there are two options to assign the clustering algorithm: either choose from a set of pre-defined clustering algorithms (+ hyper-parameters), or simply supply your own function to do the decomposition.</p>
<div id="using-pre-configured-defaults" class="section level4">
<h4 class="hasAnchor">
<a href="#using-pre-configured-defaults" class="anchor"></a>Using pre-configured defaults</h4>
<p>For people do not have much experience in clustering, one may simply one of many pre-defined <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">linkage criteria</a> to the <code>cl</code> argument of the <code>use_clustering_algorithm</code> method. The choice of linkage criteria determines the type of hierarchical clustering to perform. Given a cluster hierarchy, it’s common to <code>cut</code> the tree at some height value to obtain a partitioning of the points. There are a few available cutting heuristics implemented which attempt to identify the major ‘clusters’ automatically. See <code><a href="../reference/use_clustering_algorithm.html">?use_clustering_algorithm</a></code> for more details.</p>
<p>Below is an example of how to specify a pre-configured clustering approach.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/use_clustering_algorithm.html">use_clustering_algorithm</a></span>(<span class="dt">cl =</span> <span class="st">"single"</span>, <span class="dt">cutoff_method =</span> <span class="st">"continuous"</span>)</a></code></pre></div>
<p>For a complete list of the available linkage criteria, see <code><a href="https://www.rdocumentation.org/packages/stats/topics/hclust">?stats::hclust</a></code>.</p>
</div>
<div id="using-a-custom-function" class="section level4">
<h4 class="hasAnchor">
<a href="#using-a-custom-function" class="anchor"></a>Using a custom function</h4>
<p>If it is not sufficient to use one of the standard clustering methods, you can alteratively just supply your own clustering function. The only requirement is that it take input the index of the open set <code>pid</code>, a vector of indices <code>idx</code><span class="math inline">\(\subset \{1, 2, \dots, n\}\)</span> (representing the preimage), and the <em>mapperRef</em> instance object <code>self</code>, and return an integer vector giving a partitioning on that subset. An example of how one might construct a custom clustering function leveraging the <code>parallelDist</code> and <code>fastcluster</code> packages is given below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">custom_clustering_f &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">num_bins.default =</span> 10L){</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">  dependencies_met &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"parallelDist"</span>, <span class="st">"fastcluster"</span>), requireNamespace)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stopifnot">stopifnot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all">all</a></span>(dependencies_met))</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">  <span class="cf">function</span>(pid, idx, self) {</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">    dist_x &lt;-<span class="st"> </span>self<span class="op">$</span><span class="kw"><a href="../reference/distance_subset.html">distance_subset</a></span>(idx)</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">    hcl &lt;-<span class="st"> </span>fastcluster<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/fastcluster/topics/hclust">hclust</a></span>(dist_x, <span class="dt">method =</span> <span class="st">"single"</span>)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">    eps &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cutoff_first_bin.html">cutoff_first_bin</a></span>(hcl, <span class="dt">num_bins =</span> num_bins.default)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">    <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cutree">cutree</a></span>(hcl, <span class="dt">h =</span> eps)</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb18-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb18-11" data-line-number="11">m<span class="op">$</span><span class="kw"><a href="../reference/use_clustering_algorithm.html">use_clustering_algorithm</a></span>(<span class="dt">cl =</span> <span class="kw">custom_clustering_f</span>(10L))</a></code></pre></div>
<p>The above example also demonstrates a simplified example of what one of the pre-configured options might look like. Functions supplied via the <code>use_clustering_algorithm</code> accessor are given access to the instance fields and methods, e.g. the data <code>self$data(...)</code> and the measure with <code>self$measure</code>.</p>
<p>By default, the metric to cluster on is set to euclidean distance. However, the distance measure may also be any one of the 49 (at this time of writing) proximity measures available in from the <code>proxy</code> package. To change the distance measure, use the <code>use_distance_measure</code> method.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/use_distance_measure.html">use_distance_measure</a></span>(<span class="dt">measure =</span> <span class="st">"euclidean"</span>)</a></code></pre></div>
<p>For a complete list of the distance/similarity measures supported, see <code><a href="https://www.rdocumentation.org/packages/proxy/topics/registry">?proxy::pr_DB</a></code>.</p>
<p>Notice the clustering function in this example was created as a <a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">closure</a>. Since closures <a href="http://adv-r.had.co.nz/Functional-programming.html#functional-programming">capture their enclosing environments</a>, they can be quite useful for e.g. storing auxiliary parameters, validating package dependencies (e.g. as above), caching information for improved efficiency, etc. However, for the same reason, they are a common cause of a form of <a href="http://adv-r.had.co.nz/memory.html#gc">memory leaking</a> if used carelessly, so they should be used with mindfully.</p>
</div>
<div id="performing-the-decomposition" class="section level4">
<h4 class="hasAnchor">
<a href="#performing-the-decomposition" class="anchor"></a>Performing the decomposition</h4>
<p>Once the clustering algorithm has been picked the pullback, also called the <em>inverse image</em>, can be constructed.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/construct_pullback.html">construct_pullback</a></span>()</a></code></pre></div>
<p>In the <code>Mapper</code> package, <code>$construct_pullback</code> applies the clustering algorithm to the preimages of given cover, populating the vertices the <em>mapper</em> construct. A mapping between the index set and the vertex labels is also recorded.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(m<span class="op">$</span>vertices, length))</a></code></pre></div>
<pre><code>##   0   1   2   3   4   5   6   7 
## 459 133 136 129 105 132 126 456</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(m<span class="op">$</span>pullback)</a></code></pre></div>
<pre><code>## List of 5
##  $ (1): num 0
##  $ (2): num [1:2] 1 2
##  $ (3): num [1:2] 3 4
##  $ (4): num [1:2] 5 6
##  $ (5): num 7</code></pre>
</div>
</div>
<div id="constructing-the-k-skeleton" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-the-k-skeleton" class="anchor"></a>Constructing the k-skeleton</h2>
<p>The final step to create a Mapper is to construct the geometric realization of the pullback cover: a simplicial complex. Internally, the simplicial complex <em>Mapper</em> computes is stored in a <a href="https://hal.inria.fr/hal-00707901v1/document">Simplex Tree</a>. The underlying simplex tree is exported as an <a href="https://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-modules.pdf">Rcpp Module</a>, and is accessible via the <code>$simplicial_complex</code> member.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">m<span class="op">$</span>simplicial_complex</a></code></pre></div>
<pre><code>## &lt; empty simplex tree &gt;</code></pre>
<p>The simplex tree is a type of trie specialized specifically for storing and running general algorithms on simplicial complexes. For more details on the simplex tree, see use <code>?simplextree</code>, or see the <a href="https://github.com/peekxc/simplextree/">package repository</a>, and references therein.</p>
<p>The construction of the simplicial complex is achieved by creating a <span class="math inline">\(k\)</span>-simplex for each non-empty <span class="math inline">\((k + 1)\)</span>-fold intersection. Often, instead of constructing the full-dimensional complex (where the dimension is governed by the maximum number of non-empty intersections in the cover), it’s common to restrict the <em>mapper</em> to the <em>k</em>-skeleton of the nerve instead.</p>
<p>With the <code>Mapper</code> package, each dimension can be specified (and parameterized) independently, i.e.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 0L)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">m<span class="op">$</span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 1L)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="co"># ... </span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4">m<span class="op">$</span>simplicial_complex</a></code></pre></div>
<pre><code>## Simplex Tree with (8, 8) (0, 1)-simplices</code></pre>
<p>The reason for this design is that, for some practical applications, there may be dimension-dependent operations one may want to isolate. For example, if instead of modifying the complex directly, you want to just get the <span class="math inline">\(k\)</span>-simplices that <em>would</em> be added to complex, i.e. had a non-empty intersection, you can specify <code>modify=FALSE</code></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 1L, <span class="dt">modify =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## [[1]]
## [1] 0 1
## 
## [[2]]
## [1] 0 2
## 
## [[3]]
## [1] 2 3
## 
## [[4]]
## [1] 1 4
## 
## [[5]]
## [1] 4 5
## 
## [[6]]
## [1] 3 6
## 
## [[7]]
## [1] 5 7
## 
## [[8]]
## [1] 6 7</code></pre>
<p>Just like the <code>$construct_pullback</code> method, <code>$construct_nerve</code> optionally accepts a subset of indices which can be used to restrict the intersection computation to specific subsets of the data. For example, the following only considers non-empty intersections between vertices whose connected components intersected the sets indexed by “(1)” and “(2)”</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co">## This checks the pairs given by: expand.grid(v1=m$pullback$`(1)`, v2=m$pullback$`(2)`)</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">m<span class="op">$</span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 1L, <span class="dt">indices =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"(1)"</span>, <span class="st">"(2)"</span>), <span class="dt">nrow =</span> <span class="dv">1</span>))</a></code></pre></div>
<p>In this way, the <code>$construct_nerve</code> method allows one to obtain finer control over how exactly either individual pairs of subsets or individual dimension of the simplicial complex are constructed. If one just wants to construct <span class="math inline">\(k\)</span>-simplices for all non-empty intersections up to some dimension of <span class="math inline">\(k\)</span>, e.g. to reduce the <em>mapper</em> to its graph representation, the <span class="math inline">\(1\)</span>-skeleton may be computed as follows.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">m<span class="op">$</span><span class="kw"><a href="../reference/construct_k_skeleton.html">construct_k_skeleton</a></span>(<span class="dt">k =</span> 1L) <span class="co">## equivalent </span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2">m<span class="op">$</span>simplicial_complex</a></code></pre></div>
<pre><code>## Simplex Tree with (8, 8) (0, 1)-simplices</code></pre>
<p>Each call to <code>construct_k_skeleton</code> clears out the simplicial complex, decomposes the preimages into vertices, and then iteratively builds the nerve up to the specified dimension. Constructing the skeleton this way is an idempotent operation: it can safely be called redundantly, and should always return the same result (assuming the clustering algorithm is deterministic).</p>
</div>
<div id="putting-it-all-together" class="section level2">
<h2 class="hasAnchor">
<a href="#putting-it-all-together" class="anchor"></a>Putting it all together</h2>
<p>The above is a brief exposition into the various components of the <code>MapperRef</code> object. Generally speaking, obtaining an ‘accurate’ <em>mapper</em> representation of data may require careful tweaking. This package attempts to enable the configurability one might need to obtain that representation.</p>
<p>To streamline this process, the <code>Mapper</code> packages relies on <a href="https://adv-r.hadley.nz/r6.html#method-chaining">method chaining</a> to allow composability. That is, by convention, all the methods denoted with the <code>use_*</code> enact side-effects on the <code>MapperRef</code> object and return the instance invisibly. This enables a reduction of the Mapper <code>pipeline</code> to a sequence of chained operations:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">m &lt;-<span class="st"> </span>MapperRef<span class="op">$</span><span class="kw">new</span>()<span class="op">$</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/use_data.html">use_data</a></span>(noisy_circle)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/use_filter.html">use_filter</a></span>(<span class="dt">filter =</span> f_x)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/use_cover.html">use_cover</a></span>(<span class="dt">cover =</span> <span class="st">"fixed interval"</span>, <span class="dt">number_intervals =</span> 5L, <span class="dt">percent_overlap =</span> <span class="dv">20</span>)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/use_distance_measure.html">use_distance_measure</a></span>(<span class="dt">measure =</span> <span class="st">"euclidean"</span>)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/use_clustering_algorithm.html">use_clustering_algorithm</a></span>(<span class="dt">cl =</span> <span class="st">"single"</span>)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="../reference/construct_pullback.html">construct_pullback</a></span>()<span class="op">$</span></a>
<a class="sourceLine" id="cb34-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 0L)<span class="op">$</span></a>
<a class="sourceLine" id="cb34-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 1L)</a></code></pre></div>
<p>Practical defaults and wrappers are available to simplify this even further. In particular, the default distance measure is euclidean, the default clustering algorithm is single-linkage w/ a sensible cutting heuristic, etc. Thus, the above can also be constructed with:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">m &lt;-<span class="st"> </span>MapperRef<span class="op">$</span><span class="kw">new</span>(noisy_circle)<span class="op">$</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/use_filter.html">use_filter</a></span>(<span class="dt">filter =</span> f_x)<span class="op">$</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/use_cover.html">use_cover</a></span>(<span class="dt">number_intervals =</span> 5L, <span class="dt">percent_overlap =</span> <span class="dv">20</span>)<span class="op">$</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/construct_k_skeleton.html">construct_k_skeleton</a></span>(<span class="dt">k =</span> 1L)</a></code></pre></div>
<p>If the Mapper is constantly being reparameterized, this interface is preferred over the more concise <code>mapper</code> call because of the efficiency that comes with mutability. To illustrate this, consider the case where you want to use a different distance measure for the clustering algorithm. To change the metric with the ‘static’ approach, one might do something like the following:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">all_params &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">  <span class="dt">data =</span> noisy_circle, </a>
<a class="sourceLine" id="cb36-3" data-line-number="3">  <span class="dt">filter =</span> f_x, </a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  <span class="dt">cover =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">cover=</span><span class="st">"fixed interval"</span>, <span class="dt">number_intervals=</span>10L, <span class="dt">percent_overlap=</span><span class="dv">50</span>), </a>
<a class="sourceLine" id="cb36-5" data-line-number="5">  <span class="dt">clustering_algorithm =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">cl=</span><span class="st">"single"</span>, <span class="dt">cutoff_method=</span><span class="st">"histogram"</span>, <span class="dt">num_bins=</span>10L)</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb36-7" data-line-number="7"></a>
<a class="sourceLine" id="cb36-8" data-line-number="8">m_static1 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/do.call">do.call</a></span>(mapper, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/append">append</a></span>(all_params, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>( <span class="dt">distance_measure =</span> <span class="st">"euclidean"</span>)))</a>
<a class="sourceLine" id="cb36-9" data-line-number="9">m_static2 &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/do.call">do.call</a></span>(mapper, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/append">append</a></span>(all_params, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>( <span class="dt">distance_measure =</span> <span class="st">"mahalanobis"</span>)))</a></code></pre></div>
<p>Both function calls require the entire mapper to be reconstructed, including the cover, the allocation for the simplex tree, all initializers, etc. With reference semantics, you can keep all the same settings and just change what is needed. For example, the following switches the distance measure and exports <code>mapper</code> objects without reconstructing the cover:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">m_dynamic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"euclidean"</span>, <span class="st">"mahalanobis"</span>), <span class="cf">function</span>(measure){</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">  m<span class="op">$</span><span class="kw"><a href="../reference/use_distance_measure.html">use_distance_measure</a></span>(measure)<span class="op">$</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="../reference/construct_k_skeleton.html">construct_k_skeleton</a></span>(<span class="dt">k=</span>1L)<span class="op">$</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="../reference/exportMapper.html">exportMapper</a></span>()</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">})</a></code></pre></div>
<p>Note that, due to the a natural dependency chain that comes with Mapper, the pullback and nerve operations both needed to be recomputed (via <code>construct_k_skeleton</code>), since the latter depends on the former, and the former depends on the distance measure. Determining what requires recomputing depends on how far up the dependency chain you go. For example, consider recomputing the 1-simplices with different intersection size thresholds.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/invisible">invisible</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="cf">function</span>(e_weight){</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">  m<span class="op">$</span><span class="kw"><a href="../reference/construct_nerve.html">construct_nerve</a></span>(<span class="dt">k =</span> 1L, <span class="dt">min_weight =</span> e_weight)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">  <span class="co"># ... $exportMapper()</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4">}))</a></code></pre></div>
<p>In this case, compared to the static method, we save on needing to recompute the cover, the clustering, and the construction of the pullback.</p>
</div>
<div id="visualizing-the-mapper" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-the-mapper" class="anchor"></a>Visualizing the Mapper</h2>
<p>The <code>pixiplex</code> package provides a <a href="https://www.htmlwidgets.org/">htmlwidget</a> implementation of a subset of the <a href="https://www.pixijs.com/">pixi.js</a> geared for visualizing and interacting with simplicial complexes, which can be used to visualize the <em>mapper</em> construction. An export option is available via the <code>$as_pixiplex</code> function, which provides a few default coloring and sizing options.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"pixiplex"</span>)</a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(m<span class="op">$</span><span class="kw"><a href="../reference/as_pixiplex.html">as_pixiplex</a></span>())</a></code></pre></div>
<div id="pixiplex_vis" style="width:700px;height:432.632880098888px;" class="pixiplex_vis html-widget"></div>
<script type="application/json" data-for="pixiplex_vis">{"x":{"plex":{"nodes":{"id":[0,1,2,3,4,5,6,7],"x":[0.55912630568847,0.897021861883842,0.189111654765168,0,1,0.811461496354473,0.103861830783854,0.441525126423137],"y":[1,0.812500018307327,0.895175848345743,0.558745521586501,0.441622660201888,0.106040627175461,0.187994344204086,0]},"links":{"source":[0,0,1,2,3,4,5,6],"target":[1,2,4,3,6,5,7,7]}},"canvas":false,"api":[{"method":"setNodeStyle","node_ids":[0,1,2,3,4,5,6,7],"style":{"color":[255,63487,65532,65295,392960,16580352,15924992,16711680],"radius":[15,5.7909604519774,5.87570621468927,5.67796610169492,5,5.76271186440678,5.59322033898305,14.9152542372881]}}]},"evals":[],"jsHooks":[]}</script><p>For more information, see the <a href="https://github.com/peekxc/pixiplex">package repository</a>.</p>
<p>For a static rendering of the <em>mapper</em>, one can use either the <code>as_igraph</code> method or, for higher-order complexes, the default S3 plot method available in the simplextree package (e.g. <code><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot(m$simplicial_complex)</a></code>). Other options for visualization are an ongoing effort. If you have a particular visualization package you prefer, feel free to <a href="https://github.com/peekxc/Mapper">submit a issue or PR on the github repository</a>.</p>
<!-- If the clustering function depends on internal components of the `MapperRef` class instance, the function will error when it is first called. Consider the exact same code as above, but this time parameterized by a field of the `MapperRef` instance. -->
<!-- ```{r, eval = FALSE, echo = TRUE} -->
<!-- m$measure <- "euclidean" -->
<!-- custom_clustering_f <- function(){  -->
<!--   ... -->
<!--   dist_x <- parallelDist::parallelDist(X[idx,], method = self$measure) -->
<!--   ... -->
<!-- } -->
<!-- ``` -->
<!-- This will return an evaluation error upon executing, both from the user side and internally.  -->
<!-- ```{r, eval = FALSE} -->
<!-- m$clustering_algorithm(idx = 1:10) -->
<!-- ## Error in pmatch(method, METHODS) : object 'self' not found  -->
<!-- ``` -->
<!-- The search path of the execution environment of the closure doesn't traverse the binding environment of either the _self_ or _private_ environments associated with the instance. If access to these environments is needed, pass the clustering function via the `cl` argument of the `use_clustering_algorithm` member.  -->
<!-- ```{r} -->
<!-- m$use_clustering_algorithm(cl = custom_clustering_f(), run_internal = TRUE) -->
<!-- ``` -->
<!-- This effectively allows the user to use any clustering algorithm they wish, even algorithms that depend on the internal parameters of the _mapper_ itself.  -->
<!-- The only requirements of the function is that it accept as its arguments the index of the open set to peform the partial clustering and the indices of the points in the preimage of that open set, and return as its output a vector of integers indicating component membership. -->
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#quickstart">Quickstart</a></li>
      <li>
<a href="#building-the-mapper-piecewise">Building the Mapper piecewise</a><ul class="nav nav-pills nav-stacked">
<li><a href="#constructing-the-cover">Constructing the cover</a></li>
      <li><a href="#decomposing-the-preimages">Decomposing the preimages</a></li>
      <li><a href="#constructing-the-k-skeleton">Constructing the k-skeleton</a></li>
      <li><a href="#putting-it-all-together">Putting it all together</a></li>
      <li><a href="#visualizing-the-mapper">Visualizing the Mapper</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matt Piekenbrock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
